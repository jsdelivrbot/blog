<!DOCTYPE html>
<!-- release v4.3.7, copyright 2014 - 2017 Kartik Visweswaran -->
<!--suppress JSUnresolvedLibraryURL -->
<html lang="en">
<head>
    <meta charset="UTF-8"/>
   <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="./css/table.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="./js/fileinput.js" type="text/javascript"></script>
    <script src="./js/fileinput_locale_fr.js" type="text/javascript"></script>
    <script src="./js/fileinput_locale_es.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>
</head>
<body>
<div class="container kv-main">
    <form enctype="multipart/form-data">
        <div class="form-group">
            <input id="file-5" class="file" type="file" multiple data-preview-file-type="any" data-upload-url="#">
        </div>
    </form>
</div>
<div class="container kv-main">
    <table class="mylist" id = "fileInfo">  

   <tr>  

      <th>文件名</th>  

      <th>文件大小</th>  

      <th>最后修改时间</th>  

      <th>作者</th>  

      <th>简介</th>  

      <th>关键字</th>  

      <th>备注</th>  

   </tr>  
</table>  
</div>
</body>


<script>    
$("#file-5").fileinput({
        'allowedFileExtensions': ['pdf', 'mp4']
    });
$("#file-5").on('fileloaded', function(event, file, previewId, index) {
    //alert('i = ' + index + event + ', id = ' + previewId + ', file = ' + file.name);
    var row = $("<tr></tr>");
    var table = $("#fileInfo");
    var str = "<input type=\"text\" multiple>";
    row.append($("<td></td>").html(file.name));
    row.append($("<td></td>").html((file.size/(1024*1024)).toFixed(2)+"M"));
    var time = new Date( file.lastModified );
    row.append($("<td></td>").html(time.toLocaleDateString() + " " + time.toLocaleTimeString()));

    for(i = 0;i < 4;i++)
    {
        row.append($("<td></td>").html(str));
    }
    table.append(row);

});

$("#file-5").on('filepreremove', function(id, idx) {
    
    var str = $("#" + idx).attr("title");
    $("td:contains("  + str + ")").parent().remove();

});

$("#file-5").on('fileclear', function() {
    
     $("#fileInfo tr:gt(0)").remove();

});
</script>
</html>